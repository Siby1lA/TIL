# 1. ES6

## 1.1 ES6 이상의 버전을 브라우저에서 인식하지 못한다면 어떻게 해결해야 하는지?

> 최신 자바스크립트의 호환성 문제를 해결하는 방법에 대한 질문

브라우저 별로 구동원리 또는 JS엔진 등의 차이가 있기 때문에 브라우저 호환성 이슈가 발생하는데, 이러한 차이를 최소화해 런타임 환경에 맞게 최적화 하는 작업을 `크로스 브로우징` 이라고 한다.

Javascript의 호환성에 따른 충돌이나 부작용을 줄이기 위한 방법으로는 `Babel` 이라는 도구를 사용하면 된다.
babel은 주로 ES5 이상 버전의 코드를 현재 및 과거 브라우저와 같은 환경에서 호환되는 버전으로 변환하는 데 사용되는 도구로, IE나 다른 브라우저에서 동일한 기능을 제공하고 `side-effect` 를 최소한으로 줄일 수 있다.

> **side-effect란**
>
> 1. 의도하지 않은 결과
> 2. 리턴값에 영향을 미치지 않는 모든 작업들

## 1.2 babel은 컴파일러인가? 트랜스파일러인가

> **babel이란?**
>
> 바벨은 주로 ECMAScript 2015+ 코드를 현재 및 과거의 브라우저와 같은 환경에서 호환되는 버전으로 변환하는데 주로 사용되는 도구이다.

`babel` 은 빌드 단계에서 Javascript를 다른 언어로 변환하는 것이 아닌 앱에서 설정된 환경에 맞게 또는 현재 사용하고 있는 대중적인 브라우저 스펙 또는 호환성에 맞는 하위 버전의 javascript로 변환한다는 의미에서 `babel` 은 `트랜스파일러` 라고 할 수 있다.

> **컴파일러란?**
>
> 한 언어로 작성된 코드를 다른 언어로 변환하는 것으로 C 코드로 개발된 코드를 Assembly 코드로 변환하는 것이라 보면 된다.

> **트랜스파일러란?**
>
> 한 언어로 작성된 코드를 비슷한 수준의 추상화를 가진 언어로 변환하는 것이다.

바벨이 빌드 단계를 설명하자면 파싱, 변환, 출력의 단계로 코드를 변환하는데

1. 파싱 : 코드를 읽고 추상 구문 트리(AST)로 변환하는 단계
2. 변환 : 추상 구문 트리(AST)를 변경
3. 출력 : 변경된 결과물을 출력

위와 같은 빌드 단계를 통해 babel은 javascript의 호환성 이슈를 해결한다.

### 바벨에서 코드를 변환하기 위한 규칙은 어떻게 설정하나?

babel를 사용한다고 코드를 변환할 수 있다고는 할 수 없으며 변환하기 위한 규칙이나 브라우저 버전을 설정해야 하는데 이 작업은 `바벨 플러그인` 이 담당한다.

> **바벨 플러그인이란?**
>
> 바벨이 변환할 코드에 대한 규칙. custom으로 Javascript의 기능에 따라 각각 설정하기에는 까다롭고 매우 많기 때문에, `preset` 이라는 플러그인을 사용해 손쉽게 변환규칙을 설정해줄 수 있다.

> **preset이란?**
>
> 필요한 플로그인들을 목적에 따라 세트로 묶여 있는 플러그인이다.
> 대표적으로 `preset-env` 가 있으며 프로젝트가 지원하고자 하는 환경에 기반해 빌드 타임에 동적으로 결정하는 프리셋으로 ES6 이상의 코드를 변환한다.

### 크로스 브라우징 이슈를 해결하기 위해 플러그인을 설정해 호환가능한 버전으로 변환하지만 빌트인 메서드나 JS 기능이 없는 경우에는 어떻게 해결할 수 있는가?

빌드 과정에서 babel를 통해 트랜스파일링을 했더라도 `Promise` 와 같은 빌트인, `Array.prototype.includes` 등의 인스턴스 메서드가 코드에 남아있을 수 있다.
해당 빌트인 또는 메서드를 지원하지 않는 환경에서는 에러를 유발하거나 앱이 멈추는 이슈가 발생하는데 이를 해결하기 위한 기술이 `폴리필 (Polyfill)` 이다. babel 설정에서 폴리필을 설정하면, 최신 ECMAScript 환경을 만들기 위해 코드가 실행되는 환경에 존재하지 않는 빌트인 메서드 등을 추가해준다.

폴리필 전체를 빌드에 포함하면 번들 사이즈가 너무 커질수 있기 때문에, preset-env 의 `useBuiltIns` 옵션을 사용하면 빌드 타임에 babel-polyfill import를 꼭 필요한 폴리필 import로 대체해 번들의 사이즈를 줄일 수 있다.
